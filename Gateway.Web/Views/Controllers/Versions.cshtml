@using Gateway.Web.Services
@model Gateway.Web.Models.Controllers.VersionsModel
@{
    Layout = "~/Views/Shared/_Layout.NoFooter.cshtml";
    ViewBag.Title = "All Controllers";
    ViewBag.Current = "Master Version";
}
@{ Html.RenderPartial("_ControllersNav"); }

<div id="page-content-wrapper">
    <div class="list-group, @(Model.Loaded?"hide":"show")">
        <p>
            <ul class="list-group">
                <li class="list-group-item active"> The following actions will be applied:</li>
                <li class="list-group-item"> Mark all latest versions of controllers as active</li>
                <li class="list-group-item"> Mark all other versions as inactive unless they have an alias (e.g. official) or they are the pricing/riskbatch controllers</li>
                <li class="list-group-item"> For pricing/riskbatch controllers mark as inactive if they do not have alias AND there is no assigned PnRLib add-in version to any group or user</li>
                <li class="list-group-item"> Delete all versions that are inactive/disabled older than 4 versions before latest</li>
            </ul>
        </p>
        @using (Html.BeginForm("Versions", "Controllers", FormMethod.Post, new { name = "form", @class = "form-horizontal", role = "form" }))
            {
            <img src="../../Content/img/ajax-loader.gif" id="loading" />
            <button type="submit" class="btn btn-default" i="submit">
                Update All Versions
            </button>
        }
    </div>
    <br />
    <ul class="list-group, @(Model.Loaded?"show":"hide")">
        <li class="list-group-item active"> The following actions were applied:</li>
        @foreach (var item in @Model.Log)
        {
            <li class="list-group-item">@item</li>
        }
    </ul>
</div>